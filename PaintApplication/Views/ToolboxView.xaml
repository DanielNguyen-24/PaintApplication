<UserControl x:Class="PaintApplication.Views.ToolboxView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit">

    <Border Background="#2b2b2b" Padding="1">
        <StackPanel Orientation="Horizontal" VerticalAlignment="Top">

            <!-- Pencil -->
            <ToggleButton Content="✏" Height="30" Width="40"
              IsChecked="{Binding SelectedTool, 
                                  Converter={StaticResource EnumToBooleanConverter}, 
                                  ConverterParameter=Pencil, Mode=TwoWay}" />

            <ToggleButton Content="🩹" Margin="4" Height="30" Width="40"
              IsChecked="{Binding SelectedTool, 
                                  Converter={StaticResource EnumToBooleanConverter}, 
                                  ConverterParameter=Eraser, Mode=TwoWay}" />

            <ToggleButton Content="—" Margin="4" Height="30" Width="40"
              IsChecked="{Binding SelectedTool, 
                                  Converter={StaticResource EnumToBooleanConverter}, 
                                  ConverterParameter=Line, Mode=TwoWay}" />

            <ToggleButton Content="▭" Margin="4" Height="30" Width="40"
              IsChecked="{Binding SelectedTool, 
                                  Converter={StaticResource EnumToBooleanConverter}, 
                                  ConverterParameter=Rectangle, Mode=TwoWay}" />

            <ToggleButton Content="◯" Margin="4" Height="30" Width="40"
              IsChecked="{Binding SelectedTool, 
                                  Converter={StaticResource EnumToBooleanConverter}, 
                                  ConverterParameter=Ellipse, Mode=TwoWay}" />

            <!-- Color Button + Popup -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="8,0">
                <!-- Nút mở color picker -->
                <Button x:Name="ColorButton" Content="🎨" Width="40" Height="30" Click="ColorButton_Click"/>

                <!-- Ô hiển thị màu hiện tại -->
                <Rectangle Width="30" Height="30" Stroke="White" StrokeThickness="1"
                           Fill="{Binding SelectedColor, Converter={StaticResource ColorToBrushConverter}}"
                           Margin="4,0"/>

                <!-- Popup chứa ColorPicker -->
                <Popup x:Name="ColorPopup" PlacementTarget="{Binding ElementName=ColorButton}" 
                       Placement="Bottom" StaysOpen="False">
                    <Border BorderBrush="Gray" BorderThickness="1" Background="White">
                        <xctk:ColorPicker SelectedColor="{Binding SelectedColor, Mode=TwoWay}" 
                                          Width="220" Height="220"
                                          UsingAlphaChannel="False"
                                          DisplayColorAndName="False"
                                          />
                    </Border>
                </Popup>
            </StackPanel>

            <!-- Thickness slider -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="8,0">
                <TextBlock Text="Thickness" VerticalAlignment="Center" Foreground="White" Margin="4"/>
                <Slider Width="120" Minimum="1" Maximum="30" Value="{Binding Thickness}" />
            </StackPanel>
        </StackPanel>
    </Border>
</UserControl>
